{"version":3,"file":"toggleshortencontent.min.js","sources":["../src/toggleshortencontent.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/*\n * JavaScript for toggle show/hide shorten text to work with OSEP Theme.\n *\n * @package mod_forumng\n * @copyright 2020 The Open University\n * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\ndefine(function() {\n    const KEYS = {\n        ENTER: 13\n    };\n\n    /**\n     *\n     * @alias module:mod_forum/toggleshortencontent\n     */\n    var t = {\n            /**\n             * Initialize.\n             */\n            initial: function() {\n                document.querySelectorAll('.wrapper_fullcontent, .toggle_showless').forEach(elem => {\n                    elem.style.display = 'none';\n                });\n\n                t.handleShortenContent();\n            },\n\n            /**\n             * Add events to selectors.\n             */\n            handleShortenContent: function() {\n                const toggleContent = (e, el) => {\n                    var parent = el.parentElement.parentElement;\n                    var elems = parent.querySelectorAll('.wrapper_shortencontent, .wrapper_fullcontent');\n                    elems.forEach(elem => {\n                        t.toggle(elem);\n                    });\n\n                    elems = parent.querySelectorAll('.toggle_showmore, .toggle_showless');\n                    elems.forEach(elem => {\n                        t.toggle(elem);\n                    });\n                };\n\n                document.querySelectorAll('.toggle_showmore, .toggle_showless').forEach(elem => {\n                    elem.addEventListener('click', e => {\n                        toggleContent(e, elem);\n                    });\n                    elem.addEventListener('keypress', e => {\n                        if (e.keyCode === KEYS.ENTER) {\n                            toggleContent(e, elem);\n                        }\n                    });\n                });\n                return false;\n            },\n\n            /**\n             * Toggle the element.\n             *\n             * @param {HTMLElement} elem\n             */\n            toggle: (elem) => {\n                if (elem.style.display !== 'none') {\n                    elem.style.display = 'none';\n                } else {\n                    elem.style.display = 'inline';\n                }\n            }\n        };\n    return t;\n});\n"],"names":["define","KEYS","t","initial","document","querySelectorAll","forEach","elem","style","display","handleShortenContent","toggleContent","e","el","parent","parentElement","elems","toggle","addEventListener","keyCode"],"mappings":";;;;;;;AAuBAA,2CAAO,iBACGC,WACK,OAOPC,EAAI,CAIAC,QAAS,WACLC,SAASC,iBAAiB,0CAA0CC,SAAQC,OACxEA,KAAKC,MAAMC,QAAU,UAGzBP,EAAEQ,wBAMNA,qBAAsB,iBACZC,cAAgB,CAACC,EAAGC,UAClBC,OAASD,GAAGE,cAAcA,cAC1BC,MAAQF,OAAOT,iBAAiB,iDACpCW,MAAMV,SAAQC,OACVL,EAAEe,OAAOV,UAGbS,MAAQF,OAAOT,iBAAiB,uCAC1BC,SAAQC,OACVL,EAAEe,OAAOV,iBAIjBH,SAASC,iBAAiB,sCAAsCC,SAAQC,OACpEA,KAAKW,iBAAiB,SAASN,IAC3BD,cAAcC,EAAGL,SAErBA,KAAKW,iBAAiB,YAAYN,IAC1BA,EAAEO,UAAYlB,YACdU,cAAcC,EAAGL,aAItB,GAQXU,OAASV,OACsB,SAAvBA,KAAKC,MAAMC,QACXF,KAAKC,MAAMC,QAAU,OAErBF,KAAKC,MAAMC,QAAU,kBAI9BP"}